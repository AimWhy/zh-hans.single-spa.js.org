(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{232:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"rightToc",(function(){return p})),n.d(t,"default",(function(){return r}));var a=n(1),i=n(9),o=(n(0),n(300)),c={id:"configuration",title:"\u4f7f\u7528single-spa\u914d\u7f6e",sidebar_label:"single-spa config"},p=[{value:"Index.html\u6587\u4ef6",id:"indexhtml\u6587\u4ef6",children:[]},{value:"\u6ce8\u518c\u5e94\u7528",id:"\u6ce8\u518c\u5e94\u7528",children:[{value:"Using arguments",id:"using-arguments",children:[]},{value:"name",id:"name",children:[]},{value:"loadingFunction",id:"loadingfunction",children:[]},{value:"Activity function",id:"activity-function",children:[]}]},{value:"\u8c03\u7528 singleSpa.start()",id:"\u8c03\u7528-singlespastart",children:[{value:"Using configuration object",id:"using-configuration-object",children:[]}]},{value:"Calling singleSpa.start()",id:"calling-singlespastart",children:[]},{value:"\u540c\u65f6\u6ce8\u518c\u4e24\u4e2a\u8def\u7531??",id:"\u540c\u65f6\u6ce8\u518c\u4e24\u4e2a\u8def\u7531",children:[]}],l={rightToc:p},b="wrapper";function r(e){var t=e.components,n=Object(i.a)(e,["components"]);return Object(o.b)(b,Object(a.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"<<<<<<< HEAD\nsingle-spa\u57fa\u7840\u914d\u7f6e\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a\n1\u3001\u4e00\u4e2ahtml\u6587\u4ef6\uff0c\u4f1a\u88ab\u6240\u6709single-spa\u5e94\u7528\u5171\u4eab"),Object(o.b)("h1",{id:"2\u3001\u4e00\u6bb5javascript\u4ee3\u7801\uff0c\u8c03\u7528singlesparegisterapplication\u65b9\u6cd5\u6765\u6ce8\u518c\u5404\u4e2a\u5e94\u7528"},"2\u3001\u4e00\u6bb5javascript\u4ee3\u7801\uff0c\u8c03\u7528",Object(o.b)("a",Object(a.a)({parentName:"h1"},{href:"/docs/api.html#registerApplication"}),Object(o.b)("inlineCode",{parentName:"a"},"singleSpa.registerApplication()")),"\u65b9\u6cd5\u6765\u6ce8\u518c\u5404\u4e2a\u5e94\u7528"),Object(o.b)("p",null,"The single spa root config consists of the following:"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"The root HTML file that is shared by all single-spa applications."),Object(o.b)("li",{parentName:"ol"},"the javascript that calls ",Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"/docs/api.html#registerapplication"}),Object(o.b)("inlineCode",{parentName:"a"},"singleSpa.registerApplication()")),".",Object(o.b)("blockquote",{parentName:"li"},Object(o.b)("blockquote",{parentName:"blockquote"},Object(o.b)("blockquote",{parentName:"blockquote"},Object(o.b)("blockquote",{parentName:"blockquote"},Object(o.b)("blockquote",{parentName:"blockquote"},Object(o.b)("blockquote",{parentName:"blockquote"},Object(o.b)("blockquote",{parentName:"blockquote"},Object(o.b)("p",{parentName:"blockquote"},"069aa3595c6feb44c90bfdbfff5cdb623f9bbbe5")))))))))),Object(o.b)("p",null,"\u8fd9\u4e24\u4e2a\u6839\u76ee\u5f55\u4e0b\u7684\u914d\u7f6e\u7528\u4e8e\u542f\u52a8single-spa\u5e94\u7528\u3002"),Object(o.b)("h2",{id:"indexhtml\u6587\u4ef6"},"Index.html\u6587\u4ef6"),Object(o.b)("p",null,"\u5185\u5bb9\u53ef\u53c2\u8003",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"http://single-spa-playground.org/playground/html-file"}),"\u8be5\u793a\u4f8b"),"\u3002\u6ce8\u610f\u8be5\u6587\u4ef6\u4e0d\u5305\u542bhtml\u5143\u7d20(div, buttons\u7b49)\uff0c\u53ea\u662f\u4e3a\u4e86\u8c03\u7528",Object(o.b)("inlineCode",{parentName:"p"},"registerApplication()"),"\u65b9\u6cd5\u3002"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"\u5728\u4f7f\u7528single-spa\u65f6\uff0c\u4e0d\u5fc5\u4f7f\u7528SystemJS"),"\uff0c\u4e0d\u8fc7\u4e3a\u4e86\u80fd\u591f",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/separating-applications.html"}),"\u72ec\u7acb\u90e8\u7f72"),"\u5404\u5e94\u7528\uff0c\u5f88\u591a\u793a\u4f8b\u548c\u6559\u7a0b\u4f1a\u63a8\u8350\u4f7f\u7528SystemJS\u3002"),Object(o.b)("h2",{id:"\u6ce8\u518c\u5e94\u7528"},"\u6ce8\u518c\u5e94\u7528"),Object(o.b)("p",null,"<<<<<<< HEAD\n\u4f60\u9700\u8981\u5148\u6ce8\u518c",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/building-applications"}),"\u5e94\u7528"),"\uff0c\u8fd9\u6837single-spa\u624d\u77e5\u9053\u5728\u4ec0\u4e48\u65f6\u673a\uff0c\u5982\u4f55\u53bb\u521d\u59cb\u5316\u3001\u4e0b\u8f7d\u3001\u6302\u8f7d\u548c\u5378\u8f7d\u5404\u5e94\u7528\u3002\u6211\u4eec\u4e00\u822c\u60c5\u51b5\u4e0b\u5728single-spa\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u8fdb\u884c\u6ce8\u518c\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u6709\u5176\u4ed6\u65b9\u5f0f(\u4e0d\u63a8\u8350)\u3002\u5982\u679c\u5728\u67d0\u4e2a\u5e94\u7528\u4e2d\u6ce8\u518c\u5176\u4ed6\u5e94\u7528\uff0c\u8fd9\u4e24\u4e2a\u5e94\u7528\u4e0d\u4f1a\u5b58\u5728\u5d4c\u5957\u5173\u7cfb\uff0c\u4ed6\u4eec\u8fd8\u662f\u540c\u7ea7\u5173\u7cfb\uff0c\u5e94\u7528\u7684\u6302\u8f7d\u548c\u4e0b\u8f7d\u4e5f\u8fd8\u662f\u4f1a\u4f9d\u8d56\u5404\u81ea\u7684\u89e6\u53d1\u6761\u4ef6(activity functions)\u3002"),Object(o.b)("h1",{id:"\u6211\u4eec\u901a\u8fc7\u8c03\u7528register-applicationname\uff0chowtoload\uff0cactivityfunction\u65b9\u6cd5\u6765\u6ce8\u518c\u5e94\u7528\u3002\u4f8b\u5982\uff1a"},"\u6211\u4eec\u901a\u8fc7\u8c03\u7528",Object(o.b)("inlineCode",{parentName:"h1"},"register application(name\uff0chowToLoad\uff0cactivityFunction)"),"\u65b9\u6cd5\u6765\u6ce8\u518c\u5e94\u7528\u3002\u4f8b\u5982\uff1a"),Object(o.b)("p",null,"In order to register an application, call the ",Object(o.b)("inlineCode",{parentName:"p"},"registerApplication")," function. Example:"),Object(o.b)("blockquote",null,Object(o.b)("blockquote",{parentName:"blockquote"},Object(o.b)("blockquote",{parentName:"blockquote"},Object(o.b)("blockquote",{parentName:"blockquote"},Object(o.b)("blockquote",{parentName:"blockquote"},Object(o.b)("blockquote",{parentName:"blockquote"},Object(o.b)("blockquote",{parentName:"blockquote"},Object(o.b)("p",{parentName:"blockquote"},"069aa3595c6feb44c90bfdbfff5cdb623f9bbbe5")))))))),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"// single-spa-config.js\nimport { registerApplication, start } from 'single-spa';\n\n// Simple usage\nregisterApplication(\n    'app2',\n    () => import('src/app2/main.js'),\n    (location) => location.pathname.startsWith('/app2')\n);\n\n// Config with more expressive API\nregisterApplication({\n    name: 'app1',\n    app: () => import('src/app1/main.js'),\n    activeWhen: '/app1'\n);\n\nstart();\n")),Object(o.b)("h3",{id:"using-arguments"},"Using arguments"),Object(o.b)("p",null,"<<<<<<< HEAD"),Object(o.b)("h3",{id:"name"},"name"),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"registerApplication"),"\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u8868\u793a\u5e94\u7528\u540d\u79f0\uff0c",Object(o.b)("inlineCode",{parentName:"p"},"name"),"\u5fc5\u987b\u662fstring\u7c7b\u578b"),Object(o.b)("h3",{id:"loadingfunction"},"loadingFunction"),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"registerApplication"),"\u53ef\u4ee5\u662f\u4e00\u4e2aPromise\u7c7b\u578b\u7684 ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"configuration#loading-function"}),"\u52a0\u8f7d\u51fd\u6570"),"\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u5df2\u7ecf\u88ab\u89e3\u6790\u7684\u5e94\u7528\u3002"),Object(o.b)("h4",{id:"\u5e94\u7528\u4f5c\u4e3a\u7b2c\u4e8c\u4e2a\u53c2\u6570"},"\u5e94\u7528\u4f5c\u4e3a\u7b2c\u4e8c\u4e2a\u53c2\u6570"),Object(o.b)("h1",{id:"\u4f60\u53ef\u4ee5\u9009\u62e9\u5c06\u4e00\u4e2a\u5df2\u7ecf\u88ab\u89e3\u6790\u8fc7\u7684\u5e94\u7528\u4f5c\u4e3aregisterapplication\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u8fd9\u4e2a\u5e94\u7528\u5176\u5b9e\u662f\u4e00\u4e2a\u5305\u542b\u5404\u4e2a\u751f\u547d\u5468\u671f\u51fd\u6570\u7684\u5bf9\u8c61\u3002\u6211\u4eec\u65e2\u53ef\u4ee5\u4ece\u53e6\u5916\u4e00\u4e2a\u6587\u4ef6\u4e2d\u5f15\u5165\u8be5\u5bf9\u8c61\uff0c\u4e5f\u53ef\u4ee5\u5728single-spa\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u5b9a\u4e49\u8fd9\u4e2a\u5bf9\u8c61\u3002"},"\u4f60\u53ef\u4ee5\u9009\u62e9\u5c06\u4e00\u4e2a\u5df2\u7ecf\u88ab\u89e3\u6790\u8fc7\u7684\u5e94\u7528\u4f5c\u4e3a",Object(o.b)("inlineCode",{parentName:"h1"},"registerApplication"),"\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u8fd9\u4e2a\u5e94\u7528\u5176\u5b9e\u662f\u4e00\u4e2a\u5305\u542b\u5404\u4e2a\u751f\u547d\u5468\u671f\u51fd\u6570\u7684\u5bf9\u8c61\u3002\u6211\u4eec\u65e2\u53ef\u4ee5\u4ece\u53e6\u5916\u4e00\u4e2a\u6587\u4ef6\u4e2d\u5f15\u5165\u8be5\u5bf9\u8c61\uff0c\u4e5f\u53ef\u4ee5\u5728single-spa\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u5b9a\u4e49\u8fd9\u4e2a\u5bf9\u8c61\u3002"),Object(o.b)("h4",{id:"application-name"},"Application name"),Object(o.b)("p",null,"The first argument to ",Object(o.b)("inlineCode",{parentName:"p"},"registerApplication")," must be a string name."),Object(o.b)("h4",{id:"loading-function-or-application"},"Loading Function or Application"),Object(o.b)("p",null,"The second argument to ",Object(o.b)("inlineCode",{parentName:"p"},"registerApplication")," must be either a function that returns a promise ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"configuration#loading-function"}),"loading function")," or the resolved Application."),Object(o.b)("h5",{id:"application-as-second-argument"},"Application as second argument"),Object(o.b)("p",null,"Optionally for the second argument you can use the resolved Application, consisting of an object with the lifecycle methods.\nThis allows you import the Application from another file or define applications inline in your single-spa-config"),Object(o.b)("blockquote",null,Object(o.b)("blockquote",{parentName:"blockquote"},Object(o.b)("blockquote",{parentName:"blockquote"},Object(o.b)("blockquote",{parentName:"blockquote"},Object(o.b)("blockquote",{parentName:"blockquote"},Object(o.b)("blockquote",{parentName:"blockquote"},Object(o.b)("blockquote",{parentName:"blockquote"},Object(o.b)("p",{parentName:"blockquote"},"069aa3595c6feb44c90bfdbfff5cdb623f9bbbe5")))))))),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"const application = {\n  bootstrap: () => Promise.resolve(), //bootstrap function\n  mount: () => Promise.resolve(), //mount function\n  unmount: () => Promise.resolve(), //unmount function\n}\nregisterApplication('applicatonName', application, activityFunction)\n\n")),Object(o.b)("p",null,"<<<<<<< HEAD"),Object(o.b)("h4",{id:"\u52a0\u8f7d\u51fd\u6570"},"\u52a0\u8f7d\u51fd\u6570"),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"registerApplication"),"\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u5fc5\u987b\u662f\u8fd4\u56depromise\u7684\u51fd\u6570(\u6216",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://ponyfoo.com/articles/understanding-javascript-async-await"}),'"async function"'),"\u65b9\u6cd5)\u3002\u8fd9\u4e2a\u51fd\u6570\u6ca1\u6709\u5165\u53c2\uff0c\u4f1a\u5728\u5e94\u7528\u7b2c\u4e00\u6b21\u88ab\u4e0b\u8f7d\u65f6\u8c03\u7528\u3002\u8fd4\u56de\u7684Promise resolve\u4e4b\u540e\u7684\u7ed3\u679c\u5fc5\u987b\u662f\u4e00\u4e2a\u53ef\u4ee5\u88ab\u89e3\u6790\u7684\u5e94\u7528\u3002\u5e38\u89c1\u7684\u5b9e\u73b0\u65b9\u6cd5\u662f\u4f7f\u7528import\u52a0\u8f7d\uff1a",Object(o.b)("inlineCode",{parentName:"p"},"() => import('/path/to/application.js')")),Object(o.b)("h3",{id:"activity-function"},"Activity function"),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"registerApplication"),"\u7684\u7b2c\u4e09\u4e2a\u53c2\u6570\u9700\u8981\u662f\u4e00\u4e2a\u7eaf\u51fd\u6570\uff0c",Object(o.b)("inlineCode",{parentName:"p"},"window.location"),"\u4f1a\u4f5c\u4e3a\u7b2c\u4e00\u4e2a\u53c2\u6570\u88ab\u8c03\u7528\uff0c\u5f53\u51fd\u6570\u8fd4\u56de\u7684\u503c\u4e3a\u771f(truthy)\u503c\u65f6\uff0c\u5e94\u7528\u4f1a\u88ab\u6fc0\u6d3b\u3002\u901a\u5e38\u60c5\u51b5\u4e0b\uff0cActivity function\u4f1a\u6839\u636e",Object(o.b)("inlineCode",{parentName:"p"},"window.location"),"/\u540e\u9762\u7684path\u6765\u51b3\u5b9a\u8be5\u5e94\u7528\u662f\u5426\u9700\u8981\u88ab\u6fc0\u6d3b\u3002"),Object(o.b)("p",null,"\u53e6\u5916\u4e00\u79cd\u573a\u666f\u662fsingle-spa\u6839\u636e\u9876\u7ea7\u8def\u7531\u67e5\u627e\u5e94\u7528\uff0c\u800c\u6bcf\u4e2a\u5e94\u7528\u4f1a\u5904\u7406\u81ea\u8eab\u7684\u5b50\u8def\u7531\u3002 \u5728\u4ee5\u4e0b\u573a\u666f\uff0csingle-spa\u4f1a\u8c03\u7528\u5e94\u7528\u7684activity function"),Object(o.b)("p",null,"\u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\uff0csingle-spa\u5c06\u8c03\u7528\u6bcf\u4e2a\u5e94\u7528\u7684\u6d3b\u52a8\u51fd\u6570\uff1a"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"hashchange")," or ",Object(o.b)("inlineCode",{parentName:"li"},"popstate"),"\u4e8b\u4ef6\u89e6\u53d1\u65f6"),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"pushState")," or ",Object(o.b)("inlineCode",{parentName:"li"},"replaceState"),"\u88ab\u8c03\u7528\u65f6"),Object(o.b)("li",{parentName:"ul"},"\u5728single-spa\u4e0a\u624b\u52a8\u8c03\u7528","[",Object(o.b)("inlineCode",{parentName:"li"},"triggerAppChange"),"]"," \u65b9\u6cd5"),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"checkActivityFunctions"),"\u65b9\u6cd5\u88ab\u8c03\u7528\u65f6")),Object(o.b)("h2",{id:"\u8c03\u7528-singlespastart"},"\u8c03\u7528 singleSpa.start()"),Object(o.b)("h1",{id:"start\u65b9\u6cd5-\u5fc5\u987b\u88absingle-spa\u914d\u7f6e\u6587\u4ef6\u7684js\u8c03\u7528\uff0c\u8fd9\u65f6\u5e94\u7528\u624d\u4f1a\u88ab\u771f\u6b63\u6302\u8f7d\u3002\u5728start\u88ab\u8c03\u7528\u4e4b\u524d\uff0c\u5e94\u7528\u5148\u88ab\u4e0b\u8f7d\uff0c\u4f46\u4e0d\u4f1a\u521d\u59cb\u5316\u6302\u8f7d\u5378\u8f7d\u3002start\u65b9\u6cd5\u53ef\u4ee5\u534f\u52a9\u6211\u4eec\u66f4\u597d\u63d0\u5347\u5e94\u7528\u7684\u6027\u80fd\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u9a6c\u4e0a\u6ce8\u518c\u4e00\u4e2a\u5e94\u7528\u4e3a\u4e86\u7acb\u523b\u4e0b\u8f7d\u4ee3\u7801\uff0c\u4f46\u4e0d\u80fd\u9a6c\u4e0a\u5c31\u5728dom\u8282\u70b9\u4e0a\u6302\u8f7d\u8be5\u5e94\u7528\uff0c\u800c\u662f\u9700\u8981\u7b49\u4e00\u4e2aajax\u8bf7\u6c42\u53ef\u80fd\u4f1a\u83b7\u53d6\u7528\u6237\u7684\u767b\u5f55\u4fe1\u606f\u5b8c\u6210\u540e\uff0c\u518d\u6839\u636e\u7ed3\u679c\u8fdb\u884c\u6302\u8f7d\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6700\u4f73\u5b9e\u8df5\u662f\u5148\u8c03\u7528registerapplication\uff0c\u7b49ajax\u8bf7\u6c42\u5b8c\u6210\u540e\u518d\u8c03\u7528start\u3002"},Object(o.b)("a",Object(a.a)({parentName:"h1"},{href:"/docs/api#start"}),Object(o.b)("inlineCode",{parentName:"a"},"start()\u65b9\u6cd5"))," ",Object(o.b)("strong",{parentName:"h1"},"\u5fc5\u987b"),"\u88absingle-spa\u914d\u7f6e\u6587\u4ef6\u7684js\u8c03\u7528\uff0c\u8fd9\u65f6\u5e94\u7528\u624d\u4f1a\u88ab\u771f\u6b63\u6302\u8f7d\u3002\u5728",Object(o.b)("inlineCode",{parentName:"h1"},"start"),"\u88ab\u8c03\u7528\u4e4b\u524d\uff0c\u5e94\u7528\u5148\u88ab\u4e0b\u8f7d\uff0c\u4f46\u4e0d\u4f1a\u521d\u59cb\u5316/\u6302\u8f7d/\u5378\u8f7d\u3002",Object(o.b)("inlineCode",{parentName:"h1"},"start"),"\u65b9\u6cd5\u53ef\u4ee5\u534f\u52a9\u6211\u4eec\u66f4\u597d\u63d0\u5347\u5e94\u7528\u7684\u6027\u80fd\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u9a6c\u4e0a\u6ce8\u518c\u4e00\u4e2a\u5e94\u7528(\u4e3a\u4e86\u7acb\u523b\u4e0b\u8f7d\u4ee3\u7801)\uff0c\u4f46\u4e0d\u80fd\u9a6c\u4e0a\u5c31\u5728DOM\u8282\u70b9\u4e0a\u6302\u8f7d\u8be5\u5e94\u7528\uff0c\u800c\u662f\u9700\u8981\u7b49\u4e00\u4e2aAJAX\u8bf7\u6c42(\u53ef\u80fd\u4f1a\u83b7\u53d6\u7528\u6237\u7684\u767b\u5f55\u4fe1\u606f)\u5b8c\u6210\u540e\uff0c\u518d\u6839\u636e\u7ed3\u679c\u8fdb\u884c\u6302\u8f7d\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6700\u4f73\u5b9e\u8df5\u662f\u5148\u8c03\u7528",Object(o.b)("inlineCode",{parentName:"h1"},"registerApplication"),"\uff0c\u7b49AJAX\u8bf7\u6c42\u5b8c\u6210\u540e\u518d\u8c03\u7528",Object(o.b)("inlineCode",{parentName:"h1"},"start"),"\u3002"),Object(o.b)("h5",{id:"loading-function"},"Loading function"),Object(o.b)("p",null,"The second argument to ",Object(o.b)("inlineCode",{parentName:"p"},"registerApplication")," must be a function that returns a promise (or an ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://ponyfoo.com/articles/understanding-javascript-async-await"}),'"async function"'),").\nThe function will be called with no arguments when it's time to load the application for the first time. The returned\npromise must be resolved with the application. The most common implementation of a loading function is an import call:\n",Object(o.b)("inlineCode",{parentName:"p"},"() => import('/path/to/application.js')")),Object(o.b)("h4",{id:"activity-function-1"},"Activity function"),Object(o.b)("p",null,"The third argument to ",Object(o.b)("inlineCode",{parentName:"p"},"registerApplication")," must be a pure function, the function is provided ",Object(o.b)("inlineCode",{parentName:"p"},"window.location")," as the first argument, and returns a truthy\nvalue whenever the application should be active. Most commonly, the activity function determines if an application\nis active by looking at ",Object(o.b)("inlineCode",{parentName:"p"},"window.location"),"/the first param."),Object(o.b)("p",null,"Another way of looking at this is that single-spa is a top-level router that has a lot of applications that have their own sub-router."),Object(o.b)("p",null,"single-spa will call each application's activity function under the following scenarios:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"hashchange")," or ",Object(o.b)("inlineCode",{parentName:"li"},"popstate")," event"),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"pushState")," or ",Object(o.b)("inlineCode",{parentName:"li"},"replaceState")," is called"),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"/docs/api#triggerappchange"}),Object(o.b)("inlineCode",{parentName:"a"},"triggerAppChange"))," api is called on single-spa"),Object(o.b)("li",{parentName:"ul"},"Whenever the ",Object(o.b)("inlineCode",{parentName:"li"},"checkActivityFunctions")," method is called")),Object(o.b)("h3",{id:"using-configuration-object"},"Using configuration object"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"const config = {\n    name: 'myApp',\n    app: () => import('src/myApp/main.js'),\n    activeWhen: ['/myApp', (location) => location.pathname.startsWith('/some/other/path')],\n}\n")),Object(o.b)("h4",{id:"configname"},"config.name"),Object(o.b)("p",null,"Must be a string name"),Object(o.b)("h4",{id:"configapp"},"config.app"),Object(o.b)("p",null,"The definition of your app, which can be an object with single-spa lifecycle\nmethods, or a loading function, the same as the second argument on the arguments API"),Object(o.b)("h4",{id:"configactivewhen"},"config.activeWhen"),Object(o.b)("p",null,"Can be an activity function, like the arguments API, a path prefix or an array\nwith both. Since the most common use case is to look at the ",Object(o.b)("inlineCode",{parentName:"p"},"window.location")," and match the URL with a\nprefix, we decided to do this for you!"),Object(o.b)("h4",{id:"path-prefix"},"Path prefix"),Object(o.b)("p",null,"The path prefix will match the start of your URL, allowing everything after the\nprefix. Examples:"),Object(o.b)("dl",null,Object(o.b)("dt",null,"'/app1'"),Object(o.b)("dd",null,"\u2705 https://app.com/app1"),Object(o.b)("dd",null,"\u2705 https://app.com/app1/anything/everything"),Object(o.b)("dd",null,"\ud83d\udeab https://app.com/app2"),Object(o.b)("dt",null,"'/users/:userId/profile'"),Object(o.b)("dd",null,"\u2705 https://app.com/users/123/profile"),Object(o.b)("dd",null,"\u2705 https://app.com/users/123/profile/sub-profile/"),Object(o.b)("dd",null,"\ud83d\udeab https://app.com/users//profile/sub-profile/"),Object(o.b)("dd",null,"\ud83d\udeab https://app.com/users/profile/sub-profile/"),Object(o.b)("dt",null,"'/pathname/#/hash'"),Object(o.b)("dd",null,"\u2705 https://app.com/pathname/#/hash"),Object(o.b)("dd",null,"\u2705 https://app.com/pathname/#/hash/route/nested"),Object(o.b)("dd",null,"\ud83d\udeab https://app.com/pathname#/hash/route/nested"),Object(o.b)("dd",null,"\ud83d\udeab https://app.com/pathname#/another-hash"),Object(o.b)("dt",null,"['/pathname/#/hash', '/app1']"),Object(o.b)("dd",null,"\u2705 https://app.com/pathname/#/hash/route/nested"),Object(o.b)("dd",null,"\u2705 https://app.com/app1/anything/everything"),Object(o.b)("dd",null,"\ud83d\udeab https://app.com/pathname/app1"),Object(o.b)("dd",null,"\ud83d\udeab https://app.com/app2")),Object(o.b)("h2",{id:"calling-singlespastart"},"Calling singleSpa.start()"),Object(o.b)("p",null,"The ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/api#start"}),Object(o.b)("inlineCode",{parentName:"a"},"start()")," api")," ",Object(o.b)("strong",{parentName:"p"},"must")," be called by your single spa config in order for\napplications to actually be mounted. Before ",Object(o.b)("inlineCode",{parentName:"p"},"start")," is called, applications will be loaded, but not bootstrapped/mounted/unmounted.\nThe reason for ",Object(o.b)("inlineCode",{parentName:"p"},"start")," is to give you control over performance. For example, you may want to register applications\nimmediately (to start downloading the code for the active ones), but not actually mount the applications\nuntil an initial AJAX request (maybe to get information about the logged in user) has been completed. In that case,\nthe best performance is achieved by calling ",Object(o.b)("inlineCode",{parentName:"p"},"registerApplication")," immediately, but calling ",Object(o.b)("inlineCode",{parentName:"p"},"start")," after\nthe AJAX request is completed."),Object(o.b)("blockquote",null,Object(o.b)("blockquote",{parentName:"blockquote"},Object(o.b)("blockquote",{parentName:"blockquote"},Object(o.b)("blockquote",{parentName:"blockquote"},Object(o.b)("blockquote",{parentName:"blockquote"},Object(o.b)("blockquote",{parentName:"blockquote"},Object(o.b)("blockquote",{parentName:"blockquote"},Object(o.b)("p",{parentName:"blockquote"},"069aa3595c6feb44c90bfdbfff5cdb623f9bbbe5")))))))),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"//single-spa-config.js\nimport { start } from 'single-spa';\n\n /*\u5728\u6ce8\u518c\u5e94\u7528\u4e4b\u524d\u8c03\u7528start\u610f\u5473\u7740single-spa\u53ef\u4ee5\u7acb\u5373\u5b89\u88c5\u5e94\u7528\uff0c\u65e0\u9700\u7b49\u5f85\u5355\u9875\u5e94\u7528\u7684\u4efb\u4f55\u521d\u59cb\u8bbe\u7f6e\u3002*/\n\nstart();\n// \u6ce8\u518c\u5e94\u7528\u3002\u3002\u3002\u3002\n")),Object(o.b)("h2",{id:"\u540c\u65f6\u6ce8\u518c\u4e24\u4e2a\u8def\u7531"},"\u540c\u65f6\u6ce8\u518c\u4e24\u4e2a\u8def\u7531??"),Object(o.b)("p",null,"emm...\u4e5f\u662f\u53ef\u4ee5\u7684\u3002 \u4e00\u79cd\u5b9e\u73b0\u65b9\u5f0f\u662f\u4e3a\u6bcf\u4e2aapp\u521b\u5efa\u4e00\u4e2a",Object(o.b)("inlineCode",{parentName:"p"},'<div id="app name"></div>'),"\uff0c\u8fd9\u6837\u8fd9\u4e24\u4e2a\u5e94\u7528\u5c31\u4e0d\u4f1a\u540c\u65f6\u4fee\u6539\u76f8\u540c\u7684DOM\u8282\u70b9\u4e86\u3002","[\u8003\u8651\u4e00\u4e2apath\u53d8\u52a8\uff0c\u540c\u65f6\u6709\u4e24\u4e2a\u5e94\u7528\u88ab\u6fc0\u6d3b\u7684\u573a\u666f\uff0c\u8bd1\u8005\u6ce8]"))}r.isMDXComponent=!0},300:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return s}));var a=n(0),i=n.n(a),o=i.a.createContext({}),c=function(e){var t=i.a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):Object.assign({},t,e)),n},p=function(e){var t=c(e.components);return i.a.createElement(o.Provider,{value:t},e.children)};var l="mdxType",b={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},r=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,p=e.parentName,l=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&-1===t.indexOf(a)&&(n[a]=e[a]);return n}(e,["components","mdxType","originalType","parentName"]),r=c(n),s=a,u=r[p+"."+s]||r[s]||b[s]||o;return n?i.a.createElement(u,Object.assign({},{ref:t},l,{components:n})):i.a.createElement(u,Object.assign({},{ref:t},l))}));function s(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,c=new Array(o);c[0]=r;var p={};for(var b in t)hasOwnProperty.call(t,b)&&(p[b]=t[b]);p.originalType=e,p[l]="string"==typeof e?e:a,c[1]=p;for(var s=2;s<o;s++)c[s]=n[s];return i.a.createElement.apply(null,c)}return i.a.createElement.apply(null,n)}r.displayName="MDXCreateElement"}}]);